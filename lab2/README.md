# Исходное регулярное выражение (вариант 27)

L = `(a|b)*ab(a|b)(a|b)(a|b*)`

---

# Минимальный ДКА

![Минимальный ДКА](dfa.svg)

---

# Таблица префиксов и суффиксов для обоснования минимальности ДКА

|       | $\varepsilon$  | a | b | ba | bab | aaa | bba |
|-------|---------------|---|---|----|-----|-----|-----|
| b     |         −      | −  | −  | −   |  −   |  −   | −    | 
| a     |         −      |  − | −  | −   |  +   |  −   | +    |
| ab    |         −      |  − | −  | +   |  +   |  +   | +    |
| aba   |         −      |  + | +  | +   |  +   |  −   | +    |
| abb   |         −     |  + |  + |  +  |   −  |   −  |  −   |
| abaa  |         +      | +  | +  |  −  |  +   |  −   | +    |
| abab  |         +      | +  | +  |  +  |  +   |  +   | +    |
| abbb  |         +      | +  | +  |  −  |  −   |  −   |  −   |
| abaaa |         +      | −  | −  |  −  |  +   |  −   |  +   |
| abaab |         +      | −  | +  |  +  |  +   |  +   |  +   |
| ababa |         +      | +  | +  |  +  |  +   |  −   |  +   |
| ababb |         +      | +  | +  |  +  |  −   |  −   |  −   |
| abbbb |         +      | −  | −  |  −  |  −   |  −   |  −   |

---

# Возможно малый НКА

![НКА](nfa.svg)

---

# Таблица префиксов и суффиксов для частичного обоснования минимальности НКА

|   | $\varepsilon$   | b  | bb  |  bbb | abbb |
|---|---|---|---|---|-|
| abbb  | +  | +  | +  | +  | + |
| abb  | −  |  + |  + |  + | + |
|  ab | −  | −  | +  | +  | + |
|  a |  − | −  |  − | +  | + |
|  $\varepsilon$  | − | −  | −  | −  | + |

---

# Возможно малый ПКА
Построить ПКА, не усложняющий исходный минимальный ДКА, не удалось.
При рассмотрении вариантов конъюнкции регулярных языков, я пришел к выводу,
что хотя бы одно регулярное выражение, участвующее в конъюнкции, будет не проще исходного
регулярного выражения (ДКА, его распознающий, будет содержать не меньше 13 состояний).
Вероятно, это связано с "основой" моего регулярного выражения `ab(a|b)(a|b)` - хотя бы одно из двух регулярных выражений
будет содержать это подвыражение. Также это связано с концом регулярного выражения в виде `(a|b*)` - он будет либо в таком
виде содержаться в одном из подвыражений, либо его можно разделить, например на `(ab*|b*)` и `(b*a|b*)`, но в этом нет смысла,
потому что это не упрощает исходное выражение.
Итак, ПКА будет лишь усложненем минимального ДКА, распознающего язык исходного регулярного выражения.
Значит самый минимально возможный ПКА будет конъюнкцией исходного автомата и автомата языка всех слов `(a|b)*`.

![ПКА](afa.svg)

Состояний в сумме получилось на 1 больше, чем в минимальном ДКА. 
Таблицу префиксов-суффиксов строить не имеет смысла, так как ПКА состоит из
уже минимального ДКА и автомата из 1 состояния (меньше сделать просто не получится).

---

# Расширенное регулярное выражение

L' = `^.*ab..(a?|b+)$`

Чтобы построить расширенное регулярное выражение, достаточно было заметить:
1) Альтернатива `(a|b)` представляет собой любой символ алфавита,
поэтому ее можно заменить на wildcard-операцию `.`.
2) Альтернатива `(a|b*)` в конце регулярного выражения можно представить как
(a| $\epsilon$ |bb*), где (a| $\epsilon$ ) можно заменить на опцию `a?`, а `bb*` -
на положительную итерацию `b+`.
3) В начало и конец регулярного выражения добавим маркеры начала и конца строки
(`^` и `$`).
